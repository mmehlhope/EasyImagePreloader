// Easy Image Preloader
// Created by Matt Mehlhope (mmehlhope@gmail.com), inspired by Abhin Sharma of Nettuts+
// MIT (http://www.opensource.org/licenses/mit-license.php)
// GPL (http://www.opensource.org/licenses/gpl-license.php)
(function($,undefined){var easyImagePreloader={defaults:{useFadeDelay:false,fadeDelay:100,preload_parent:"i",checkIntervalDelay:300,fadein:500,onDone:function(){},onEachLoad:function(image){}},init:function(options){return this.each(function(){var self=easyImagePreloader,$this=$(this),settings=$.extend(self.defaults,options),images=$this.find("img").css({visibility:"hidden",opacity:0}),counter=0,i=0,imageCompletionArray=[],checkImagesInterval,fadeDelay=settings.fadeDelay;images.each(function(){var $this=$(this),preloaderCSS={background:"#fff url(http://cdn.mehlhope.net/images/easyImagePreloader/loadingAnimation.gif) center center no-repeat",display:"block",};if($this.parent(settings.preload_parent).length==0){$this.wrap($("<i/>").css(preloaderCSS))}else{$this.parent("i").addClass("preloader")}imageCompletionArray[i++]=false});function checkImages(){if(counter>=imageCompletionArray.length){clearInterval(checkImagesInterval);settings.onDone();return}for(var i=0;i<images.length;i++){if(images[i].complete===true){if(imageCompletionArray[i]===false){imageCompletionArray[i]=true;settings.onEachLoad(images[i]);fadeDelay=fadeDelay+settings.fadeDelay;counter++}if(settings.useFadeDelay){$(images[i]).css("visibility","visible").delay(fadeDelay).animate({opacity:1},settings.fadein,function(){$(this).parent("i").removeAttr("style")})}else{$(images[i]).css("visibility","visible").animate({opacity:1},settings.fadein,function(){$(this).parent("i").removeAttr("style")})}}}}checkImagesInterval=setInterval(checkImages,settings.checkIntervalDelay)})}};$.fn.easyImagePreloader=function(method){if(easyImagePreloader[method]){return easyImagePreloader[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"||!method){return easyImagePreloader.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist for $.easyImagePreloader")}}}})(jQuery);